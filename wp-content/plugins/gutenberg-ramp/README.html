<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
	<meta charset="utf-8"/>
</head>
<body>

<h1 id="gutenbergramp">Gutenberg Ramp</h1>

<h3 id="overview">Overview</h3>

<p>Gutenberg Ramp is a plugin that manages the state of Gutenberg in the post-edit context. It loads or unloads Gutenberg in post-edit according to criteria specified in theme code. It is agnostic about whether Gutenberg is loading from core or via the plugin.</p>

<h3 id="howitworks">How it Works</h3>

<p>Gutenberg Ramp assumes one of the following states:</p>

<ul>
<li>WordPress 4.9 and the Gutenberg plugin (either activated or not)</li>
<li>WordPress 5.0 and a fallback editor</li>
</ul>

<p>Gutenberg Ramp makes a decision early in the WordPress load sequence (<code>plugins_loaded</code>) about whether to Get Involved. It will Get Involved if the following are true:</p>

<ul>
<li>either the post edit or new post screens are going to load AND</li>
<li>according its user-supplied criteria either: Gutenberg should load for the current post and will not OR Gutenberg shouldn&#8217;t load for the current post and will.</li>
</ul>

<p>Loading criteria are supplied either in code (in a theme or plugin) or via UI. Gutenberg can be instructed to always or never load, or to load for just particular post_id or post_types.</p>

<h3 id="specifyingloadingcriteria">Specifying Loading Criteria</h3>

<p>Criteria are stored in an option and specified by calling a function any time after <code>plugins_loaded</code>, typically in theme code or on a hook such as <code>init</code>.</p>

<p>Loading behavior is controlled by the <code>gutenberg_ramp_load_gutenberg()</code> function. Calling this function without its single optional parameter causes Gutenberg to load on all post-edit screens. An optional associative array of criteria can be passed. The possible keys and values are:</p>

<ul>
<li><code>load</code> (Int): <code>0|1</code>: never or always load Gutenberg</li>
<li><code>post_ids</code> (Array of post_ids): loads Gutenberg for the specified post_ids</li>
<li><code>post_types</code> (Array of post_types): loads Gutenberg for the specified post types.</li>
</ul>

<h3 id="codeexamples">Code Examples</h3>

<p>Load Gutenberg for all posts:</p>

<pre><code class="php">if ( function_exists( 'gutenberg_ramp_load_gutenberg' ) ) {
	gutenberg_ramp_load_gutenberg();
}
</code></pre>

<p>Never load Gutenberg:</p>

<pre><code class="php">gutenberg_ramp_load_gutenberg( false );

// Alternatively, you can use the `load` key to always disable Gutenberg:
gutenberg_ramp_load_gutenberg( [ 'load' =&gt; 0 ] );
</code></pre>

<p>Load Gutenberg only for posts with ids 12, 13 and 122:</p>

<pre><code class="php">gutenberg_ramp_load_gutenberg( [ 'post_ids' =&gt; [ 12, 13, 122 ] ] );
</code></pre>

<p>Load Gutenberg for <code>post_id: 12</code> and all posts of type <code>test</code> and <code>scratch</code>:</p>

<pre><code class="php">gutenberg_ramp_load_gutenberg(
	[
		'post_types' =&gt; [ 'test', 'scratch' ],
		'post_ids'   =&gt; [ 12 ],
	]
);
</code></pre>

<h3 id="ui">UI</h3>

<p>Gutenberg Ramp adds a section to the Settings -&gt; Writing menu that allows post_type control of Gutenberg loading. This can be used in place of specifying criteria in code.</p>

<h3 id="advanced">Advanced</h3>

<p>The typical use case is as shown above, the parameters do not change except when theme code is updated.	</p>

<p>If making more dynamic changes, note that the parameter supplied is persisted in a site option; when the parameters are changed in code, one page load is necessary to update the site option before the editor can use the new setting.</p>

<h3 id="faqs">FAQs</h3>

<p><strong>Why is a post type disabled (greyed out) at Settings &gt; Writing?</strong></p>

<p>If you&#8217;re seeing something greyed out, it means the <code>gutenberg_ramp_load_gutenberg()</code> function is already in your theme functions.php. If you want to use the wp-admin UI, remove the conflicting function from your functions.php file.</p>

<p><strong>Why are some post types are not showing up on the settings screen?</strong></p>

<p>Post types that are not compatible with Gutenberg will not show up. If you think you have found a false negative (posts in that post type DO work with Gutenberg, when Ramp plugin is deactivated) please report it as an issue on <a href="https://github.com/Automattic/ramp-for-gutenberg">GitHub here.</a></p>

<p><strong>Why are the changes I&#8217;m making in functions.php are not showing up on the next pageload?</strong></p>

<p>The parameter supplied in the function is persisted in a site option. Therefore, when the parameters are changed in code, <em>one page load is necessary</em> to update the site option before the editor can use the new setting.</p>

<p><strong>Can I contribute to this plugin?</strong></p>

<p>Absolutely! Please create issues and pull requests on <a href="https://github.com/Automattic/gutenberg-ramp">GitHub here.</a></p>

</body>
</html>

